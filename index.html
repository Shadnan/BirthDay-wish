<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HBD My Love! üêæüåπ</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #ff4d6d; --bg: #fff0f3; }
        body { margin: 0; padding: 0; background: linear-gradient(135deg, #fce4ec 0%, #ffebee 100%); font-family: 'Poppins', sans-serif; overflow: hidden; display: flex; justify-content: center; align-items: center; height: 100vh; }

        /* Floating Wishes in Background - Improved to prevent clutter */
        .wish-bubble {
            position: absolute; background: rgba(255, 255, 255, 0.7);
            padding: 6px 14px; border-radius: 20px; font-size: 0.75rem;
            color: #ad1457; font-weight: 600; white-space: nowrap;
            box-shadow: 0 4px 12px rgba(255, 77, 109, 0.1);
            animation: floatAround var(--t) ease-in-out infinite; z-index: 1;
            pointer-events: none;
        }
        @keyframes floatAround {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            50% { transform: translate(15px, -15px) rotate(3deg); }
        }

        /* Main Compact Card */
        .card {
            background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(15px);
            padding: 25px; border-radius: 30px; box-shadow: 0 10px 40px rgba(255, 77, 109, 0.3);
            text-align: center; z-index: 10; width: 280px; border: 2px solid white;
            display: none; position: relative; animation: cardAppear 1s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        @keyframes cardAppear { 0% { transform: scale(0.5); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }

        .profile-frame { width: 110px; height: 110px; margin: 5px auto; border-radius: 50%; border: 4px solid white; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .profile-frame img { width: 100%; height: 100%; object-fit: cover; }

        h1 { font-family: 'Dancing Script', cursive; color: #ad1457; font-size: 1.6rem; margin: 10px 0; }
        .message-box { font-size: 0.82rem; color: #6d4c41; font-weight: 600; line-height: 1.5; margin-top: 10px; opacity: 0; transition: 1.5s ease-out; }
        .message-box.show { opacity: 1; }

        /* Virtual Cake */
        .cake-area { margin-top: 15px; font-size: 40px; cursor: pointer; position: relative; display: inline-block; }
        .candle-flame { position: absolute; top: -10px; left: 50%; transform: translateX(-50%); color: orange; font-size: 15px; animation: flicker 0.5s infinite; }
        @keyframes flicker { 0%, 100% { opacity: 0.8; } 50% { opacity: 1; transform: translateX(-50%) scale(1.3); } }

        /* Overlay */
        #overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--primary); display: flex; justify-content: center; align-items: center; z-index: 100; transition: 0.8s ease; }
        .gift-box { font-size: 85px; cursor: pointer; animation: giftBounce 1s infinite; }
        @keyframes giftBounce { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }

        .particle { position: fixed; z-index: 5; pointer-events: none; }
    </style>
</head>
<body onclick="spawnHeart(event)">

    <div id="wish-container"></div>

    <div id="overlay">
        <div style="text-align: center;">
            <div class="gift-box" onclick="openGift()">üéÅ</div>
            <p style="color:white; font-family: 'Dancing Script', cursive; font-size: 1.6rem; margin-top: 15px;">Happy Birthday, Mim! ‚ú®</p>
        </div>
    </div>

    <audio id="bgMusic" loop>
        <source src="hbd.mp3" type="audio/mpeg">
    </audio>

    <div class="card" id="mainCard">
        <div style="font-size: 35px; margin-bottom: 5px;">üê±üåπüê¶</div>
        <div class="profile-frame">
            <img src="mim.jpg" alt="Mim">
        </div>
        <h1>Happy Birthday My Love! ‚ù§Ô∏è</h1>
        <div class="message-box" id="msgBox">
            ‡¶§‡ßÅ‡¶Æ‡¶ø ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶ú‡ßÄ‡¶¨‡¶®‡ßá‡¶∞ ‡¶∏‡¶¨‡¶ö‡ßá‡¶Ø‡¶º‡ßá ‡¶∏‡ßÅ‡¶®‡ßç‡¶¶‡¶∞ ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ‡•§ ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶ì‡¶á ‡¶Æ‡¶æ‡¶Ø‡¶º‡¶æ‡¶¨‡ßÄ ‡¶π‡¶æ‡¶∏‡¶ø ‡¶Ü‡¶∞ ‡¶∏‡¶π‡¶ú ‡¶∏‡¶∞‡¶≤ ‡¶Æ‡¶®‡¶ü‡¶æ ‡¶Ü‡¶Æ‡¶æ‡¶ï‡ßá ‡¶¨‡¶æ‡¶∞‡¶¨‡¶æ‡¶∞ ‡¶Æ‡ßÅ‡¶ó‡ßç‡¶ß ‡¶ï‡¶∞‡ßá‡•§ ‡¶∏‡¶æ‡¶∞‡¶æ‡¶ú‡ßÄ‡¶¨‡¶® ‡¶è‡¶≠‡¶æ‡¶¨‡ßá‡¶á ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶ï‡¶ø‡¶â‡¶ü ‡¶¨‡¶ø‡¶°‡¶º‡¶æ‡¶≤‡¶õ‡¶æ‡¶®‡¶æ ‡¶π‡¶Ø‡¶º‡ßá ‡¶•‡ßá‡¶ï‡ßã‡•§ ‡¶Ö‡¶®‡ßá‡¶ï ‡¶≠‡¶æ‡¶≤‡ßã‡¶¨‡¶æ‡¶∏‡¶ø ‡¶§‡ßã‡¶Æ‡¶æ‡¶ï‡ßá! ‚ú®
        </div>
        
        <div class="cake-area" onclick="blowCandle()">
            <span id="flame" class="candle-flame">üî•</span>
            üéÇ
            <p style="font-size: 0.6rem; color: #ff4d6d; margin: 0; font-weight: bold;">(Click to blow!)</p>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <script>
        // Updated wishes: Removed Bestie, Added Lokkhi Biral & Moyna Pakhi
        const birthdayWishes = ["‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Æ‡ßÄ ‡¶¨‡¶ø‡ßú‡¶æ‡¶≤ üê±", "‡¶Æ‡ßü‡¶®‡¶æ ‡¶™‡¶æ‡¶ñ‡¶ø üê¶", "My Queen üëë", "Stay Happy! üåü", "Always Smile üòä", "Stay Blessed ‚ú®", "Love You Forever ‚ù§Ô∏è", "Be Healthy üçé"];
        let rainActive = false;

        function createWishBubbles() {
            const container = document.getElementById('wish-container');
            // Using a simple grid approach to avoid overlap
            const positions = [
                {t: 10, l: 10}, {t: 15, l: 70}, {t: 75, l: 15}, {t: 80, l: 75},
                {t: 40, l: 5}, {t: 45, l: 80}, {t: 10, l: 40}, {t: 85, l: 45}
            ];

            positions.forEach((pos, idx) => {
                const bubble = document.createElement('div');
                bubble.className = 'wish-bubble';
                bubble.innerHTML = birthdayWishes[idx % birthdayWishes.length];
                bubble.style.top = pos.t + 'vh';
                bubble.style.left = pos.l + 'vw';
                bubble.style.setProperty('--t', (Math.random() * 2 + 3) + 's');
                container.appendChild(bubble);
            });
        }

        function openGift() {
            const music = document.getElementById('bgMusic');
            music.play().catch(e => console.log("Audio bypass"));
            document.getElementById('overlay').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('overlay').style.display = 'none';
                document.getElementById('mainCard').style.display = 'block';
                createWishBubbles();
                setTimeout(() => document.getElementById('msgBox').classList.add('show'), 500);
                rainActive = true;
                startContinuousRain(); 
                confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
            }, 800);
        }

        function blowCandle() {
            const flame = document.getElementById('flame');
            if(flame.style.display !== 'none') {
                flame.style.display = 'none';
                confetti({ particleCount: 150, spread: 100, origin: { y: 0.8 }, colors: ['#ff4d6d', '#ffffff', '#ffd700'] });
                
                const randomWish = birthdayWishes[Math.floor(Math.random()*birthdayWishes.length)];
                alert("Mim says: 'Thank You!' ‚ù§Ô∏è\nToday's Special Wish: " + randomWish);
            }
        }

        function startContinuousRain() {
            if(!rainActive) return;
            createParticle();
            setTimeout(startContinuousRain, 350); 
        }

        function createParticle() {
            const p = document.createElement('div');
            p.className = 'particle';
            const choices = ['üê±', 'üåπ', '‚ù§Ô∏è', 'üêæ', 'üéà', 'üç´', 'üê¶', 'üå∏', '‚ú®'];
            p.innerHTML = choices[Math.floor(Math.random() * choices.length)];
            p.style.left = Math.random() * 100 + 'vw';
            p.style.top = '-50px';
            p.style.fontSize = (Math.random() * 20 + 22) + 'px';
            document.body.appendChild(p);
            const anim = p.animate([{ transform: 'translateY(0) rotate(0deg)', opacity: 1 }, { transform: `translateY(110vh) translateX(${(Math.random()-0.5)*200}px) rotate(360deg)`, opacity: 0 }], { duration: Math.random() * 3000 + 4000, easing: 'linear' });
            anim.onfinish = () => p.remove();
        }

        function spawnHeart(e) {
            const h = document.createElement('div');
            h.innerHTML = '‚ù§Ô∏è';
            h.style.position = 'fixed'; h.style.left = (e.clientX - 10) + 'px'; h.style.top = (e.clientY - 10) + 'px'; h.style.zIndex = '1000';
            document.body.appendChild(h);
            h.animate([{ transform: 'scale(1) translateY(0)', opacity: 1 }, { transform: 'scale(2.5) translateY(-120px)', opacity: 0 }], { duration: 1000 }).onfinish = () => h.remove();
        }
    </script>
</body>
</html>